.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFARM.CONF" "5" "18 March 2003" "Gfarm" ""
.SH NAME
gfarm.conf \- Gfarm 肋年ファイル
.SH "DESCRIPTION"
.PP
gfarm.conf ファイルは、gfarm プログラムの肋年ファイルです。
サ〖バ〖ˇプロセスである gfmd と gfsd は、デフォ〖ルトでは、
この /etc/gfarm.conf を肋年ファイルとして徊救します。
なお、肋年柒推が粕み哈まれるのは弹瓢箕だけなので、
肋年柒推を恃构した眷圭、サ〖バ〖を浩弹瓢する涩妥があります。
.PP
アプリケ〖ションプログラムは、/etc/gfarm.conf と、ユ〖ザ〖の
ホ〖ムディレクトリにある .gfarmrc ファイルを、肋年ファイル
として徊救します。.gfarmrc ファイルは、/etc/gfarm.conf と
票办の妨及で淡揭します。.gfarmrc と /etc/gfarm.conf では、
\&.gfarmrc の数が庭黎されます。
.PP
gfarm.conf は、办乖に办矢の妨及で肋年します。
ただし、乖琐に矢机 ``\\'' を淡揭することによって、乖を费鲁させることが
できます。また、矢机 ``#'' から乖琐までは、コメントとして胺われ、痰浑
されます。
.SH "ホ蝗回"
.PP
苞眶として、\fIホスト回年\fR を淡揭できる矢がいくつかありますが、
この眷圭、ホスト回年には、布淡のいずれかを淡揭できます。
.TP
\fB\fIIII.JJJ.KKK.LLL\fB\fR
"." で惰磊られた 0×256 までの眶机 4 つで、IP アドレスを回年します。
.TP
\fB\fIIII.JJJ.KKK.LLL\fB/\fIMM\fB\fR
IP アドレスと、"/" で惰磊られた 0×31 までの眶机で、ネットワ〖クを
回年します。"/" 笆惯の眶机は netmask のビット墓です。
.TP
\fB\fIdomain.name\fB\fR
ホスト叹をドメイン叹で回年します。
.TP
\fB.\fIdomain.name\fB\fR
ドメイン叹の黎片が "." ではじまる眷圭、このドメイン叹に疥掳する链ての
ホストを罢蹋します。
.SH "矢"
.PP
矢には、布淡の硷梧があります。
.TP
\fBspool \fIgfsdスプ〖ルˇディレクトリ\fB\fR
gfsdが、gfarmファイルの悸挛を瘦积するディレクトリ叹を
回年します。
ファイルシステムノ〖ドではこの肋年は涩寇です。

毋:

.nf
	spool /var/spool/gfarm
.fi
.TP
\fBspool_serverport \fIgfsdポ〖ト戎规\fB\fR
gfsdが网脱するTCPおよびUDPポ〖トの戎规を回年します。
臼维箕のデフォ〖ルトˇポ〖ト戎规は600戎です。

毋:

.nf
	spool_serverport 600
.fi
.TP
\fBmetadb_serverhost \fIgfmdホスト叹\fB\fR
gfmdが瓢侯しているホスト叹を回年します。

この肋年は涩寇です。

毋:

.nf
	metadb_serverhost ldap.example.com
.fi
.TP
\fBmetadb_serverport \fIgfmdポ〖ト戎规\fB\fR
gfmdが网脱するTCPポ〖トの戎规を回年します。
臼维箕のデフォ〖ルトˇポ〖ト戎规は601戎です。

毋:

.nf
	metadb_serverport 601
.fi
.TP
\fBldap_serverhost \fILDAPサ〖バ〖ˇホスト叹\fB\fR
LDAP サ〖バ〖が瓢侯しているホスト叹を回年します。

この肋年は涩寇です。

毋:

.nf
	ldap_serverhost ldap.example.com
.fi
.TP
\fBldap_serverport \fILDAPサ〖バ〖ˇポ〖ト戎规\fB\fR
LDAP サ〖バ〖が瓢侯しているホスト叹を回年します。

附哼のところ、この肋年は涩寇です。

毋:

.nf
	ldap_serverport 389
.fi
.TP
\fBldap_base_dn \fILDAP_base_distinguished_name\fB\fR
LDAP デ〖タベ〖スで瘦积するデ〖タのキ〖の含となるノ〖ドの
叹疚、base distinguished name を回年します。

この肋年は涩寇です。

毋:

.nf
	ldap_base_dn "dc=example, dc=com"
.fi
.TP
\fBauth \fI铜跟痰跟\fB \fI千沮数恕\fB \fIホスト回年\fB\fR
この矢は、妈3苞眶で回年したホストとの奶慨に脱いる千沮数恕を肋年します。

妈1苞眶の\fI铜跟痰跟\fR婶には、enable ないし disable
キ〖ワ〖ドを回年します。
妈2苞眶の\fI千沮数恕\fR婶には、gsi ないし sharedsecret
キ〖ワ〖ドを回年します。
妈3苞眶には、\fIホスト回年\fRを淡揭します。

この矢は剩眶回年材墙です。称千沮数恕ごとに、黎片から界にホスト回年に
努圭するかどうか拇べ、铜跟であるとの回年に努圭した眷圭、その千沮数恕が
网脱铬输になります。铜跟であるとの回年に努圭しない眷圭や、あるいは
铜跟であるとの回年に努圭するよりも涟に痰跟であるとの回年に努圭した
眷圭、その千沮数恕は、铬输になりません。

千沮数恕が佰なるものに簇しては、回年の界进は罢蹋がありません。
剩眶の千沮数恕が铬输となった眷圭、sharesecret による千沮が 
gsi より庭黎して活されます。

この回年は、サ〖バ〖娄とクライアント娄の尉数で豺坚され、
列数ともで铜跟になっている千沮数恕のみが脱いられます。

Gfarm のコンパイル箕に globus とのリンクを回年しなかった眷圭、
gsi 千沮は网脱できません。この眷圭、gsi 千沮の回年は帽に痰浑されます。

この肋年は涩寇です。

毋:

.nf
	auth disable sharedsecret 192.168.0.100
	auth disable sharedsecret 192.168.0.101
	auth enable sharedsecret 192.168.0.0/24
	auth enable gsi ALL
.fi

この毋では、ホスト 192.168.0.100 と 192.168.0.101 の 2 つのホストを
近いた 192.168.0.0/24 ネットワ〖クに掳すホストには 
sharedsecret と gsi の尉数を、それ笆嘲の链てのホスト
には gsi 千沮を活みます。
すなわち、ホスト 192.168.0.100 と 192.168.0.101 の 2 つのホストは、
gsi千沮のみを活みることになります。
.TP
\fBnetparam \fIパラメ〖タ\fB=\fI猛\fB [\fIホスト回年\fB]\fR
ネットワ〖ク奶慨に脱いる称硷パラメ〖タを回年します。
パラメ〖タには布淡のものがあります。

parallel_streams。このパラメ〖タは、奶慨に网脱する
TCPのストリ〖ム眶を回年します。臼维箕は1です。
このパラメ〖タは、TCP の奶慨ウィンドウが浇尸なサイズ
まで倡かないような斌数との奶慨の狠に、铜跟なことがあります。
附哼、このパラメ〖タはファイルの剩澜怠墙でのみ铜跟です。
附哼の悸刘では、gfrep コマンドを弹瓢したホストのユ〖ザ〖肋年ファイルの
柒推が脱いられます。ホスト回年と孺秤されるのは、剩澜黎のホストではなく、
剩澜傅のホストです。

stripe_unit_size。このパラメ〖タは、奶慨に剩眶の TCP ストリ〖ム
を网脱する眷圭に、どのように啪流柒推を尸充するかを回年します。
もしこの回年がない眷圭、啪流柒推を帽に parallel_streams 改に
尸充して流慨します。
これに滦し、stripe_unit_size を回年した眷圭は、このパラメ〖タ
で回年したバイト眶を帽疤としてストライピングして流慨します。
奶撅、帽なる尸充よりもストライピングの数が拉墙弄に铜网です。

このパラメ〖タは、惧淡の parallel_streams として 1 より络きな猛
を回年した奶慨のみで铜跟です。
附哼、このパラメ〖タはファイルの剩澜怠墙でのみ铜跟です。
附哼の悸刘では、gfrep コマンドを弹瓢したホストのユ〖ザ〖肋年ファイルの
柒推が脱いられます。ホスト回年と孺秤されるのは、剩澜黎のホストではなく、
剩澜傅のホストです。

rate_limit。コネクション1塑あたりの奶慨バンド升を扩嘎する
悸赋弄な怠墙です。回年する猛の帽疤は bps (bit per second) です。
附哼、このパラメ〖タはファイルの剩澜怠墙でのみ铜跟です。
附哼の悸刘では、剩澜傅のホスト惧の gfsd の肋年ファイルが脱いられます。
ホスト回年と孺秤されるのは、剩澜黎のホストです。

毋:

.nf
	netparam parallel_streams=2	10.0.0.0/8
	netparam stripe_unit_size=8192	10.0.0.0/8
	netparam rate_limit=750000	192.168.0.0/24
.fi
.TP
\fBsockopt \fIオプション\fB[=\fI猛\fB] [LISTENER | \fIホスト回年\fB]\fR
奶慨 socket(2) に滦して、setsockopt(2) システムコ〖ルを蝗って
ソケットˇオプションを回年します。

妈2苞眶に LISTENER を回年した眷圭、サ〖バ〖娄 (缅钙娄) の
ソケットに回年するオプションになります。この眷圭、奶慨する陵缄に
簇犯なく、办围にソケットˇオプションが肋年されます。

妈2苞眶にホスト回年を淡揭した眷圭、クライアント娄 (券钙娄) の
ソケットに回年するオプションになります。この眷圭、奶慨する陵缄髓に
ソケットˇオプションを恃えることができます。

妈2苞眶を臼维した眷圭、サ〖バ〖娄とクライアント娄の尉数で、
链ての奶慨陵缄に滦して票じソケットˇオプションを肋年します。

回年材墙なソケットˇオプションには肌のものがあります。

debug。setsockopt(2) システムコ〖ルで、SO_DEBUG ソケットˇオプションを回年します。猛を淡揭する涩妥はありません。

keepalive。setsockopt(2) システムコ〖ルで、SO_KEEPALIVE
ソケットˇオプションを回年します。猛を淡揭する涩妥はありません。

sndbuf。setsockopt(2) システムコ〖ルで、SO_SNDBUF
ソケットˇオプションを回年します。猛の回年が涩妥です。

rcvbuf。setsockopt(2) システムコ〖ルで、SO_RCVBUF
ソケットˇオプションを回年します。猛の回年が涩妥です。

tcp_nodelay。setsockopt(2) システムコ〖ルで、TCP_NODELAY
ソケットˇオプションを回年します。猛を淡揭する涩妥はありません。

毋:

.nf
	sockopt tcp_nodelay 192.168.0.0/24
	sockopt sndbuf=1048576 10.0.0.0/8
	sockopt sndbuf=1048576 LISTENER
	sockopt rcvbuf=1048576 10.0.0.0/8
	sockopt rcvbuf=1048576 LISTENER
.fi
.TP
\fBaddress_use \fIホスト回年\fB\fR
ファイルシステムノ〖ドに剩眶のIPアドレスがある眷圭、その面のどの
IPアドレスを奶慨に脱いるかを回年します。
この矢で回年したアドレスに努圭するIPアドレスを庭黎して蝗脱しますが、
努圭するアドレスがない眷圭でも、奶慨を乖ないます。

毋:

.nf
	address_use 192.168.0.0/24
.fi
.SH "GRAMMAR"
.PP
gfarm.conf の矢恕をBNFで淡揭すると、布淡のようになります。

.nf
	<statement> ::=
		<spool_statement> |
		<spool_serverport_statement> |
		<metadb_serverhost_statement> |
		<metadb_serverport_statement> |
		<ldap_serverhost_statement> |
		<ldap_serverport_statement> |
		<ldap_base_dn_statement> |
		<auth_statement> |
		<netparam_statement> |
		<sockopt_statement> |
		<address_use_statement>
	<spool_statement> ::= "spool" <pathname>
	<spool_serverport_statement> ::= "spool_serverport" <hostname>
	<metadb_serverhost_statement> ::= "metadb_serverhost" <hostname>
	<metadb_serverport_statement> ::= "metadb_serverport" <portnumber>
	<ldap_serverhost_statement> ::= "ldap_serverhost" <hostname>
	<ldap_serverport_statement> ::= "ldap_serverport" <portnumber>
	<ldap_base_dn_statement> ::= "ldap_base_dn" <string>
	<auth_statement> ::=
		"auth" <auth_command> <auth_method> <hostspec>
	<auth_command> ::= "enable" | "disable"
	<auth_method> ::= "gsi" | "sharedsecret"
	<netparam_statement> ::=
		"netparam" <netparam_option>=<number> [<hostspec>]
	<netparam_option> ::= "parallel_streams" | "stripe_unit_size" |
		"rate_limit"
	<sockopt_statement> ::=
		"sockopt" <socket_option>[=<number>] [""LISTENER" | <hostspec>]
	<socket_option> = "debug" | "keepalive" | "sndbuf" |"rcvbuf" |
		"tcp_nodelay"
	<address_use_statement> ::=  "address_use" <hostspec>
	<hostspec> ::= <ipv4_address> | <ipv4_address> "/" <address_mask> |
		<hostname>
	<pathname> ::= <pathname_character> <pathname_character>*
	<pathname_character> ::= <hostname_character> | "," | "/" | "_"
	<hostname> ::= <hostname_character> <hostname_character>*
	<hostname_character> ::= <alphabet> | <digit> | "-" | "."
	<portnumber> ::= <number>
	<number> ::= <digit> [<digit>*]
	<digit> ::= "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"
	<string> ::= """ <double_quoted_character>* """
	<double_quoted_character> ::=
		<any_character_except_backslash_and_double_quotation> |
		"\\\\" | "\\""
.fi
.SH "EXAMPLES"

.nf
spool /var/spool/gfarm
metadb_serverhost ldap.example.com
ldap_serverhost ldap.example.com
ldap_serverport 389
ldap_base_dn "dc=example, dc=com"
auth enable sharedsecret 192.168.0.0/24
auth enable gsi ALL
.fi
.SH "FILES"
.TP
\fB\fI/etc/gfarm.conf\fB\fR
.TP
\fB\fI$HOME/.gfarmrc\fB\fR
.SH "SEE ALSO"
.PP
\fBgfmd\fR(8),
\fBgfsd\fR(8), \fBsetsockopt\fR(2)

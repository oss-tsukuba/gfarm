.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFSERVICE-AGENT" "1" "07 June 2013" "Gfarm" ""

.SH NAME
gfservice-agent \- agent of gfservice
.SH SYNOPSIS

\fBgfservice-agent\fR [ \fB\fIoptions\fB\fR ] \fBhost-id\fR \fBsub-command\fR [ \fB\fIargument ...\fB\fR ]

.SH "DESCRIPTION"
.PP
\fBgfservice-agent\fR is an agent of
\fBgfservice\fR\&.
It must be installed on all hosts you want to operate using
\fBgfservice\fR\&.
Unlike \fBgfservice\fR, it doesn't read a configuration file.
.PP
\fBgfservice-agent\fR is not designed to be executed
directly by an user.
In daily use, it is executed only by \fBgfservice\fR via SSH
and Sudo.
.PP
Host-id argument is the same as that of \fBgfservice\fR, but
\fBgfservice-agent\fR uses host-id for recognizing type of
host ("gfmd", "gfsd" or "client") and debug messages only.
.PP
Sub-command names of \fBgfservice-agent\fR are similar to
those of \fBgfservice\fR, but their arguments are different.
For example, \fB"unmount"\fR sub-command of
\fBgfservice-agent\fR takes
\fI"directory=directory"\fR
argument:

.nf
	gfservice-agent client3 unmount directory=/somewhere
.fi
.PP
while \fB"unmount"\fR sub-command of \fBgfservice\fR
takes \fI"directory"\fR argument:

.nf
	gfservice unmount client3 /somewhere
.fi
.PP
Almost all arguments of \fBgfservice-agent\fR have "key=value"
form.
When two or more arguments are given, \fBgfservice-agent\fR
doesn't care about the order of arguments.
\fBgfservice-agent\fR ignores arguments with unknown keys.
.SH "OPTIONS"
.TP
\fB-d\fR
Print debug information.
.SH "SUB-COMMANDS"
.PP
\fBgfservice-agent\fR currently recognizes the following
sub-commands.
.TP
\fBget-config-gfarm-param \fIparam\fB=\fIname\fB \fIconfig-gfarm-options\fB=\fIoptions\fB\fR
Execute \fBconfig-gfarm -T\fR command and output a value of
the parameter \fIname\fR to standard out.
If the "\fIparam\fR=\fIname\fR"
argument is not specified, it outputs entire
\fBconfig-gfarm -T\fR results.
.TP
\fBget-config-gfsd-param \fIparam\fB=\fIname\fB \fIconfig-gfsd-options\fB=\fIoptions\fB\fR
Execute \fBconfig-gfsd -T\fR command and output a value of
the parameter \fIname\fR to standard out.
If the "\fIparam\fR=\fIname\fR"
argument is not specified, it outputs entire
\fBconfig-gfsd -T\fR results.
.TP
\fBbackend-db-status \fIconfig-gfarm-options\fB=\fIoptions\fB\fR
Exit with an exit code 0, if a backend database is currently running.
Otherwise exits with 1.
.TP
\fBgfmd-status \fIconfig-gfarm-options\fB=\fIoptions\fB\fR
Exit with an exit code 0, if gfmd is currently running.
Otherwise exits with 1.
.TP
\fBgfsd-status \fIconfig-gfsd-options\fB=\fIoptions\fB\fR
Exit with an exit code 0, if gfsd is currently running.
Otherwise exits with 1.
.TP
\fBstart-backend-db \fIconfig-gfarm-options\fB=\fIoptions\fB \fItimeout\fB=\fItime\fB\fR
Start a backend database if it is not running currently.
.TP
\fBstart-gfmd \fIconfig-gfarm-options\fB=\fIoptions\fB \fItimeout\fB=\fItime\fB\fR
Start gfmd if it is not running currently.
.TP
\fBstart-gfsd \fIconfig-gfsd-options\fB=\fIoptions\fB \fItimeout\fB=\fItime\fB\fR
Start gfsd if it is not running currently.
.TP
\fBconfig-gfarm \fIconfig-gfarm-options\fB=\fIoptions\fB\fR
Execute \fBconfig-gfarm\fR command.
.TP
\fBconfig-gfarm-master \fIconfig-gfarm-options\fB=\fIoptions\fB\fR
Execute \fBconfig-gfarm\fR \fI-r\fR command.
.TP
\fBconfig-gfsd \fIconfig-gfsd-options\fB=\fIoptions\fB\fR
Execute \fBconfig-gfsd\fR command.
.TP
\fBunconfig-gfarm \fIconfig-gfarm-options\fB=\fIoptions\fB\fR
Execute \fBstop-gfarm\fR sub-command and then delete all
files and directories created by gfmd and a backend database.
.TP
\fBunconfig-gfsd \fIconfig-gfsd-options\fB=\fIoptions\fB\fR
Execute \fBstop-gfsd\fR sub-command and then delete all
files and directories created by gfsd.
.TP
\fBunconfig-client \fIconfig-gfsd-options\fB=\fIoptions\fB\fR
Delete \fIgfarm2.conf\fR file.
.TP
\fBpromote \fIconfig-gfarm-options\fB=\fIoptions\fB\fR
Promote \fBgfmd\fR from a slave to a master.
.TP
\fBpromote-gfmd \fIconfig-gfarm-options\fB=\fIoptions\fB\fR
An alias of \fBpromote\fR sub-command.
.TP
\fBmount \fIdirectory\fB=\fIdirectory\fB \fIoptions\fB=\fIoptions\fB\fR
Mount a Gfarm2 filesystem on \fIdirectory\fR\&.
.TP
\fBunmount \fIdirectory\fB=\fIdirectory\fB\fR
Unmount a Gfarm2 filesystem currently mounted on
\fIdirectory\fR\&.
.TP
\fBumount \fIdirectory\fB=\fIdirectory\fB\fR
An alias of \fBunmount\fR sub-command.
.TP
\fBset-gfmd-conf \fIdirective\fB=\fIname\fB \fIvalue\fB=\fIvalue\fB\fR
Add

.nf
	\fIdirective\fR \fIvalue\fR
.fi

line to \fIgfmd.conf\fR file.
.TP
\fBset-gfarm-conf \fIdirective\fB=\fIname\fB \fIvalue\fB=\fIvalue\fB\fR
Add

.nf
	\fIdirective\fR \fIvalue\fR
.fi

line to \fIgfarm2.conf\fR file.
.TP
\fBset-gfsd-conf \fIdirective\fB=\fIname\fB \fIvalue\fB=\fIvalue\fB\fR
Add

.nf
	\fIdirective\fR \fIvalue\fR
.fi

line to \fIgfsd.conf\fR file.
.TP
\fBunset-gfmd-conf \fIdirective\fB=\fIname\fB\fR
Delete a \fIdirective\fR line in
\fIgfmd.conf\fR file.
.TP
\fBunset-gfarm-conf \fIdirective\fB=\fIname\fB\fR
Delete a \fIdirective\fR line in
\fIgfarm2.conf\fR file.
.TP
\fBunset-gfsd-conf \fIdirective\fB=\fIname\fB\fR
Delete a \fIdirective\fR line in
\fIgfsd.conf\fR file.
.TP
\fBbackup-backend-db\fR
Backup a backend database and output the backup data to standard out.
.TP
\fBbackup-gfmd-conf\fR
Output \fIgfmd.conf\fR file to standard out.
.TP
\fBbackup-gfarm-conf\fR
Output \fIgfarm2.conf\fR file to standard out.
.TP
\fBbackup-gfsd-conf\fR
Output \fIgfsd.conf\fR file to standard out.
.TP
\fBbackup-usermap\fR
Output \fIusermap\fR file to standard out.
.TP
\fBbackup-shared-key\fR
Output \fI$HOME/.gfarm_shared_key\fR file to standard out.
.TP
\fBrestore-backend-db\fR
Restore a backend database.
The backup data are read from standard in.
.TP
\fBrestore-gfmd-conf\fR
Restore \fIgfmd.conf\fR file.
The backup data are read from standard in.
.TP
\fBrestore-gfarm-conf\fR
Restore \fIgfarm2.conf\fR file.
The backup data are read from standard in.
.TP
\fBrestore-gfsd-conf\fR
Restore \fIgfsd.conf\fR file.
The backup data are read from standard in.
.TP
\fBrestore-usermap\fR
Restore \fIusermap\fR file.
The backup data are read from standard in.
.TP
\fBrestore-shared-key\fR
Restore \fI$HOME/.gfarm_shared_key\fR file.
The backup data are read from standard in.
.TP
\fBgfcmd \fIcmd\fB=\fIcommand-name\fB \fIargs\fB="\fIcommand-argument ...\fB"\fR
Execute a Gfarm command.
